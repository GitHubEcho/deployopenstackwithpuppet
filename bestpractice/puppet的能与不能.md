# Puppet的能与不能

Openstack云平台是一个复杂的软件栈，涉及到大量的配置，服务，软件包等等多种系统资源的管理，人工管理的方式必然带来最终不可维护，人工失误等诸多问题。因此，我们需要使用一套统一框架解决配置管理上的问题。我们在过去发现了一点就是，工程师们通常喜欢在一个系统/工具上去套所有的应用场景。

首先，我们要明白任何一个工具/语言/系统都不是万能的。我们在使用一个工具/语言/系统前，必须深刻理解它的能力和局限。我们既然选择了Puppet作为配置管理系统，就应知道它能做什么，不能做什么。


## 什么场景下选择使用Puppet?

Puppet适合用于以下场景：

- network,host,dns等文件的配置管理
- ssh,ntp,nscd等服务的状态管理
- MySQL,Apache,RabbitMQ等软件的包管理
- Openstack软件的包安装，配置文件管理以及服务状态的管理
- Puppet原生resource type，如ssh,host等
- Puppet第三方模块扩展的自定义resource，如keystone_user,mysql_database等

## 什么场景下不选择使用Puppet?

Puppet不适合使用以下场景：

- 源码的管理： 绝对不适合，所有服务必须以统一的打包形式上线
- 依赖包的管理：不适合，所有包的依赖必须通过spec的形式来管理
- 二进制文件的管理：不适合，所有二进制文件需要单独打包处理
- 服务的初始化操作：酌情考虑，除非逻辑非常复杂或者代价太大，否则建议采用Puppet来管理
- 服务状态的监控和恢复：Puppet并不是监控系统也不是专业的服务状态管理，每次编译catalog消耗大量资源，不适合短间隔执行来保障服务状态
- 角色间或节点间的依赖管理处理：Puppet本身没有编排能力，只能处理同一个节点内的类之间或者服务之间的依赖关系。
